= Troubleshooting guide

== NAT Gateway

. Do a traceroute from an instance in the private subnet, and you should see the private ip address of the NAT gateway in the first hops. Usually It's the first one.
On the opposite side, when running it from the public subnet, you won't see it.

. Test from the outside using a third party tool for knowing where your requester IP address is, you should see the Elastic IP Address here.

Note: Also you won't be able to access the private instance from the internet.

....
(Private subnet)
traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  ip-10-0-33-79.ec2.internal (10.0.33.79)  0.330 ms  0.300 ms  0.289 ms
 2  216.182.238.245 (216.182.238.245)  7.574 ms 216.182.231.190 (216.182.231.190)  1.306 ms 216.182.231.164 (216.182.231.164)  4.533 ms
 3  100.66.9.172 (100.66.9.172)  16.525 ms 100.65.50.32 (100.65.50.32)  45.686 ms 100.66.21.136 (100.66.21.136)  22.903 ms
 4  100.66.11.84 (100.66.11.84)  3.824 ms 100.66.24.244 (100.66.24.244)  1.335 ms 100.66.22.186 (100.66.22.186)  3.521 ms
 5  100.66.7.113 (100.66.7.113)  13.772 ms 100.66.6.177 (100.66.6.177)  17.474 ms 100.66.7.75 (100.66.7.75)  15.220 ms
 6  100.66.5.79 (100.66.5.79)  18.007 ms 100.66.6.227 (100.66.6.227)  20.915 ms 100.66.5.141 (100.66.5.141)  22.057 ms
 7  100.65.13.193 (100.65.13.193)  1.044 ms 100.66.5.155 (100.66.5.155)  22.006 ms 100.65.13.65 (100.65.13.65)  1.023 ms
 8  52.93.29.91 (52.93.29.91)  1.294 ms 52.93.29.71 (52.93.29.71)  1.493 ms 52.93.29.69 (52.93.29.69)  1.023 ms
 9  100.100.2.38 (100.100.2.38)  1.057 ms 52.93.29.99 (52.93.29.99)  2.107 ms 100.100.4.12 (100.100.4.12)  1.242 ms
10  99.82.181.25 (99.82.181.25)  1.522 ms 100.100.4.8 (100.100.4.8)  1.282 ms 99.82.181.23 (99.82.181.23)  1.441 ms
11  * * *
12  216.239.54.111 (216.239.54.111)  1.347 ms * 216.239.49.47 (216.239.49.47)  1.618 ms
13  108.170.235.113 (108.170.235.113)  2.121 ms dns.google (8.8.8.8)  1.234 ms 216.239.48.15 (216.239.48.15)  2.314 ms

(Public subnet)
[ec2-user@ip-10-0-100-56 ~]$ traceroute 8.8.8.8
traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  216.182.231.176 (216.182.231.176)  12.080 ms 216.182.225.190 (216.182.225.190)  0.959 ms 216.182.238.239 (216.182.238.239)  1.914 ms
 2  100.66.21.212 (100.66.21.212)  8.600 ms 100.65.51.80 (100.65.51.80)  0.787 ms 100.65.50.80 (100.65.50.80)  1.461 ms
 3  100.66.11.38 (100.66.11.38)  14.128 ms 100.66.24.208 (100.66.24.208)  1.624 ms 100.66.22.160 (100.66.22.160)  11.918 ms
 4  100.66.27.42 (100.66.27.42)  19.511 ms 100.66.27.196 (100.66.27.196)  51.823 ms 100.66.6.3 (100.66.6.3)  18.857 ms
 5  100.66.5.53 (100.66.5.53)  14.322 ms 100.66.6.37 (100.66.6.37)  449.500 ms 100.66.5.29 (100.66.5.29)  13.672 ms
 6  100.66.5.179 (100.66.5.179)  18.029 ms 100.65.14.193 (100.65.14.193)  3.140 ms 100.65.12.65 (100.65.12.65)  3.043 ms
 7  100.65.12.113 (100.65.12.113)  0.313 ms 52.93.29.73 (52.93.29.73)  0.520 ms 52.93.29.69 (52.93.29.69)  12.801 ms
 8  100.100.4.8 (100.100.4.8)  0.652 ms 52.93.29.73 (52.93.29.73)  0.853 ms 100.100.2.44 (100.100.2.44)  0.597 ms
 9  100.100.2.38 (100.100.2.38)  0.537 ms 99.83.65.1 (99.83.65.1)  0.975 ms 100.100.4.14 (100.100.4.14)  1.522 ms
10  99.83.68.209 (99.83.68.209)  1.299 ms 108.170.240.97 (108.170.240.97)  1.659 ms *
11  108.170.228.151 (108.170.228.151)  1.857 ms 74.125.37.221 (74.125.37.221)  1.601 ms dns.google (8.8.8.8)  0.710 ms
[ec2-user@ip-10-0-100-56 ~]$ Connection to 35.174.61.228 closed by remote host.
....